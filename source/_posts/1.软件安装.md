---
title: 1.软件安装
categories: hexo
data: 2023-01-11 04:49:12
---

## 配置环境

ubuntu22.04+顺畅访问github的网络环境

## 软件配置

### 1.安装nodejs和npm（这里使用版本14.21.1+6.14.17）

~~~shell
sudo apt install curl -y
#添加node14版本到curl
curl -sL https://deb.nodesource.com/setup_14.x | sudo -E bash -
#下载node+nodejs+npm
sudo apt-get install nodejs
#查看版本
node -v
#查看版本
npm -v
~~~

### 2.配置 npm 权限为全局安装并切换下载源

~~~shell
mkdir ~/.npm-global
#将 npm 默认下载目录设置为 .npm-global
npm config set prefix '~/.npm-global'
#将 .npm-global 环境变量添加到 .bashrc 
echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.bashrc
#更新环境变量
source ~/.bashrc
#切换npm下载源
npm config set registry http://registry.npm.taobao.org/
#查看npm下载源
npm get registry
~~~

### 3.安装hexo

~~~shell
npm install -g hexo-cli
#查看版本
hexo -v
~~~

### 4.安装git

~~~shell
sudo apt-get install git
#查看版本
git --version
~~~

### 5.配置 git 绑定 github

~~~shell
#配置 git 的用户名和邮箱（和 github 用户名邮箱一致）
git config --global user.name "thui777"
git config --global user.email "thui777@163.com"
#生成 SSH 密钥（三次回车）
ssh-keygen -t rsa -C "thui777@163.com"
#查看公钥文件 id_rsa.pub，复制SSH公钥添加到 github 账户中
cat ~/.ssh/id_rsa.pub
~~~

--------------------------------

## 出现的问题

ubuntu直接使用apt下载nodejs会安装npm不成功，且版本过低，另外安装npm会导致版本不匹配，在使用npm命令时就会报下面的错误：

```shell
npm ERR! Cannot read property 'insert' of undefined

npm ERR! A complete log of this run can be found in:
npm ERR!     /home/thui/.npm/_logs/2022-11-15T13_00_46_517Z-debug-0.log
```

因为不建议使用sudo安装hexo，在安装好npm后需要将npm配置为全局安装，否则使用npm命令会报下面的错误：

~~~shell
npm WARN checkPermissions Missing write access to /usr/lib/node_modules
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.2 (node_modules/hexo-cli/node_modules/chokidar/node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.3.2: wanted {"os":"darwin","arch":"any"} (current:{"os":"linux","arch":"x64"})
npm ERR! code EACCES
npm ERR! syscall access
npm ERR! path /usr/lib/node_modules
npm ERR! errno -13
npm ERR! Error: EACCES: permission denied, access '/usr/lib/node_modules'
npm ERR!  [Error: EACCES: permission denied, access '/usr/lib/node_modules'] {
npm ERR!   errno: -13,
npm ERR!   code: 'EACCES',
npm ERR!   syscall: 'access',
npm ERR!   path: '/usr/lib/node_modules'
npm ERR! }
npm ERR! 
npm ERR! The operation was rejected by your operating system.
npm ERR! It is likely you do not have the permissions to access this file as the current user
npm ERR! 
npm ERR! If you believe this might be a permissions issue, please double-check the
npm ERR! permissions of the file and its containing directories, or try running
npm ERR! the command again as root/Administrator.
npm ERR! A complete log of this run can be found in:
npm ERR!     /home/thui777/.npm/_logs/2022-11-16T03_24_46_479Z-debug.log
~~~



